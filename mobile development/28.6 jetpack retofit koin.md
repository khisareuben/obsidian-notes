```

com.example.learnretrofit/
├── di/
│   └── AppModule.kt
├── data/
│   ├── api/
│   │   └── ApiService.kt
│   ├── model/
│   │   └── Post.kt
│   ├── repository/
│   │   ├── PostRepository.kt
│   │   └── PostRepositoryImpl.kt
├── ui/
│   ├── PostScreen.kt
│   └── theme/
│       └── MyAppTheme.kt
├── viewmodel/
│   └── PostViewModel.kt
├── MyApp.kt
└── MainActivity.kt


```



## 🧩 1. Gradle Setup (📄 `build.gradle.kts`)

Add these dependencies in your **app-level build.gradle.kts**:



```kotlin
implementation("com.squareup.retrofit2:retrofit:2.9.0")
implementation("com.squareup.retrofit2:converter-gson:2.9.0")
implementation("io.insert-koin:koin-android:3.5.3")
implementation("androidx.lifecycle:lifecycle-viewmodel-ktx:2.6.2")
```

## 🌐 2. Permissions (📄 `AndroidManifest.xml`)



```xml
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>

<application
    android:name=".MyApp"
    ...
/>
```

## 🗂️ 3. Data Model (📄 `Post.kt` inside `data/model`)



```kotlin
package com.example.learnretrofit.data.model

data class Post(
    val id: String,
    val title: String,
    val body: String
)
```

## 🔌 4. Retrofit API Interface (📄 `ApiService.kt` inside `data/api`)



```kotlin
package com.example.learnretrofit.data.api

import com.example.learnretrofit.data.model.Post
import retrofit2.http.GET

interface ApiService {
    @GET("posts")
    suspend fun getPosts(): List<Post>
}
```

## 🛠️ 5. Repository Layer (📄 `PostRepository.kt` and `PostRepositoryImpl.kt` inside `data/repository`)



```kotlin
package com.example.learnretrofit.data.repository

import com.example.learnretrofit.data.model.Post

interface PostRepository {
    suspend fun getPosts(): List<Post>
}
```



```kotlin
package com.example.learnretrofit.data.repository

import com.example.learnretrofit.data.api.ApiService

class PostRepositoryImpl(private val apiService: ApiService) : PostRepository {
    override suspend fun getPosts(): List<Post> = apiService.getPosts()
}
```

## 🔧 6. Koin Module Setup (📄 `AppModule.kt` inside `di`)



```kotlin
package com.example.learnretrofit.di

import com.example.learnretrofit.data.api.ApiService
import com.example.learnretrofit.data.repository.PostRepository
import com.example.learnretrofit.data.repository.PostRepositoryImpl
import com.example.learnretrofit.viewmodel.PostViewModel
import org.koin.androidx.viewmodel.dsl.viewModel
import org.koin.dsl.module
import retrofit2.Retrofit
import retrofit2.converter.gson.GsonConverterFactory

val appModule = module {

    single {
        Retrofit.Builder()
            .baseUrl("https://jsonplaceholder.typicode.com")
            .addConverterFactory(GsonConverterFactory.create())
            .build()
            .create(ApiService::class.java)
    }

    single<PostRepository> { PostRepositoryImpl(get()) }

    viewModel { PostViewModel(get()) }
}
```

## 🏁 7. Koin Initialization (📄 `MyApp.kt`)



```kotlin
package com.example.learnretrofit

import android.app.Application
import com.example.learnretrofit.di.appModule
import org.koin.android.ext.koin.androidContext
import org.koin.core.context.startKoin

class MyApp : Application() {
    override fun onCreate() {
        super.onCreate()
        startKoin {
            androidContext(this@MyApp)
            modules(appModule)
        }
    }
}
```

## 🧠 8. ViewModel Layer (📄 `PostViewModel.kt` inside `viewmodel`)



```kotlin
package com.example.learnretrofit.viewmodel

import androidx.compose.runtime.State
import androidx.compose.runtime.mutableStateOf
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.example.learnretrofit.data.model.Post
import com.example.learnretrofit.data.repository.PostRepository
import kotlinx.coroutines.launch

class PostViewModel(
    private val repository: PostRepository
) : ViewModel() {

    private val _posts = mutableStateOf<List<Post>>(emptyList())
    val posts: State<List<Post>> = _posts

    init {
        fetchPosts()
    }

    private fun fetchPosts() {
        viewModelScope.launch {
            try {
                _posts.value = repository.getPosts()
            } catch (e: Exception) {
                e.printStackTrace()
            }
        }
    }
}
```

## 🎨 9. Composable UI Screen (📄 `PostScreen.kt`)



```kotlin
package com.example.learnretrofit.ui

import androidx.compose.foundation.layout.*
import androidx.compose.foundation.lazy.LazyColumn
import androidx.compose.foundation.lazy.items
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.unit.dp
import com.example.learnretrofit.data.model.Post
import com.example.learnretrofit.viewmodel.PostViewModel
import org.koin.androidx.compose.koinViewModel

@Composable
fun PostListScreen(
    viewModel: PostViewModel = koinViewModel(),
    paddingValues: PaddingValues
) {
    val posts by viewModel.posts

    if (posts.isEmpty()) {
        Box(
            modifier = Modifier.fillMaxSize(),
            contentAlignment = Alignment.Center
        ) {
            CircularProgressIndicator(color = MaterialTheme.colorScheme.primary)
        }
    } else {
        LazyColumn(
            contentPadding = PaddingValues(16.dp),
            verticalArrangement = Arrangement.spacedBy(16.dp),
            modifier = Modifier.padding(paddingValues)
        ) {
            items(posts) {
                PostCard(post = it)
            }
        }
    }
}

@Composable
fun PostCard(post: Post) {
    Card(
        modifier = Modifier.fillMaxWidth(),
        colors = CardDefaults.cardColors(MaterialTheme.colorScheme.secondaryContainer)
    ) {
        Column(modifier = Modifier.padding(16.dp)) {
            Text(text = "Post #${post.id}", style = MaterialTheme.typography.titleMedium)
            Text(text = post.title, style = MaterialTheme.typography.bodyMedium)
            Text(text = post.body, style = MaterialTheme.typography.bodySmall)
        }
    }
}
```

## 🧪 10. MainActivity Scaffold Setup (📄 `MainActivity.kt`)



```kotlin
package com.example.learnretrofit

import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.PaddingValues
import androidx.compose.material3.*
import androidx.compose.ui.Modifier
import com.example.learnretrofit.ui.PostListScreen
import com.example.learnretrofit.ui.theme.MyAppTheme

class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            MyAppTheme {
                Scaffold(
                    modifier = Modifier.fillMaxSize(),
                    containerColor = MaterialTheme.colorScheme.background
                ) { padding: PaddingValues ->
                    PostListScreen(paddingValues = padding)
                }
            }
        }
    }
}
```